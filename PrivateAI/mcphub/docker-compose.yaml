services:
  mcphub:
    image: samanhappy/mcphub
    ports:
      - "3003:3000"
    volumes:
      - ./mcp_settings.json:/app/mcp_settings.json:ro
      - ./entrypoint-proxy.sh:/app/entrypoint-proxy.sh:ro
      - ./proxychains.conf:/etc/proxychains.conf:ro
    environment:
      - HTTP_PROXY=${HTTP_PROXY}
      - HTTPS_PROXY=${HTTPS_PROXY}
      - NO_PROXY=localhost,127.0.0.1,::1,mcphub,proxy1.it.deakin.edu.au,10.137.0.162,api.mcprouter.to
    restart: unless-stopped
    extra_hosts:
      - "proxy1.it.deakin.edu.au:10.137.0.162"
    entrypoint: ["/app/entrypoint-proxy.sh"]
    command: ["pnpm","start"]
